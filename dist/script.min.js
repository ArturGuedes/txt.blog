async function fetchFile(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.text()}catch(t){throw console.error("Erro ao carregar arquivo:",t),t}}function extractSimpleTag(t,e){const n=new RegExp(`^\\[${e}\\]\\s*(.+?)$`,"m"),a=t.match(n);return a?a[1].trim():""}function extractContentTag(t,e){const n=new RegExp(`\\[${e}\\]([\\s\\S]*?)^\\[\\/${e}\\]$`,"m"),a=t.match(n);return a?a[1].trim():""}function parsePost(t){const e=extractSimpleTag(t,"tag"),n=e?e.split("|").map(t=>t.trim()).filter(t=>t):[];return{title:extractSimpleTag(t,"t"),date:extractSimpleTag(t,"d"),author:extractSimpleTag(t,"a"),thumb:extractSimpleTag(t,"thumb"),tags:n,content:extractContentTag(t,"txt")}}function renderPost(t){const e=t.tags&&t.tags.length>0?`<div []-tags>${t.tags.map(t=>`<a href="?tag=${encodeURIComponent(t)}" []-tag>${t}</a>`).join("")}</div>`:"";return`\n    <article id="${t.title}" []-index="${t.index}">\n    ${t.thumb?`<img []-thumb src="${t.thumb}" alt="${t.title}">`:""}\n    <div []-post>\n    ${t.title?`<h1><a href="?id=${t.index}">${t.title}</a></h1>`:""}\n      <div []-meta>\n      ${t.date?`<span []-date>${new Date(t.date).toLocaleDateString()}</span>`:""}\n      ${t.author?`- <a []-author href="?author=${encodeURIComponent(t.author)}">${t.author}</a>`:""}\n      </div>\n      ${e}\n      ${t.content?`<div []-content>${t.content}</div>`:""}\n      </div>\n    </article>\n  `}async function initBlog(t,{containerId:e="blog-root",debug:n=!1}){try{const a=await fetchFile(t);n&&console.log("[txt]blog: File content loaded successfully");const o=document.getElementById(e),r=new URLSearchParams(window.location.search),i=r.get("id"),s=r.get("author"),l=r.get("tag");let c=a.split(/\n--\n/).map(t=>t.trim()).filter(t=>t).map((t,e)=>({...parsePost(t),index:e}));if(c.sort((t,e)=>new Date(e.date)-new Date(t.date)),null!==i){const t=parseInt(i,10);c=c.filter(e=>e.index===t),n&&console.log(`Filtering by id=${t}`,c)}null!==s&&(c=c.filter(t=>t.author&&t.author.toLowerCase().includes(s.toLowerCase())),n&&console.log(`Filtering by author=${s}`,c)),null!==l&&(c=c.filter(t=>t.tags&&t.tags.some(t=>t.toLowerCase()===l.toLowerCase())),n&&console.log(`Filtering by tag=${l}`,c));const g=c.map(t=>renderPost(t)).filter(t=>t);return o&&(o.innerHTML=g.join(""),c.length>1?(o.classList.add("multiple-posts"),o.classList.remove("single-post")):(o.classList.add("single-post"),o.classList.remove("multiple-posts"))),n&&console.log("[txt]blog:",{postsPath:t,containerId:e,hasContainer:!!o,posts:c}),c}catch(t){console.error("Falha ao inicializar blog:",t);const e=document.getElementById(config.containerId);e&&(e.innerHTML=`\n        <div class='feed'>\n          <h1>Erro</h1>\n          <p>Não foi possível carregar as postagens.</p>\n          <p><small>Detalhes: ${t.message}</small></p>\n        </div>\n      `)}}